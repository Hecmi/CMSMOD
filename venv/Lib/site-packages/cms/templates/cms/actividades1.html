{% extends "admin/base_site.html" %}
{% load i18n l10n cms_tags cms_js_tags %}
{% load i18n static %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/js/all.min.js"></script>

{% block extrastyle %}<link rel="stylesheet" href="{% static "admin/css/login.css" %}">
{{ form.media }}
{% endblock %}

{% block usertools %}{% endblock %}

{% block nav-global %}{% endblock %}

{% block nav-sidebar %}{% endblock %}

{% block content_title %}{% endblock %}

{% block nav-breadcrumbs %}{% endblock %}

{% block content %}

<form id="" action="{% url 'save' 1 %}" method="POST">
    {% csrf_token %}

    <input type="hidden" name="IS_DYNAMIC" value="False" /

    {% if error %}
        <div class="form-row">
            {{ error }}           
        </div>
    {% endif %}

    {% if grupos %}
         <label><b>ASIGNACIONES:<b></label>
          <table style="width: 100%;  border: 1px solid grey;">
            <thead style="border: 1px solid grey;">
              <th>{% trans 'Número de grupo:' %}</th>
              <th>{% trans 'Tarea:' %}</th>
              <th>{% trans 'Usuario:' %}</th>
              <th>{% trans 'Calificación:' %}</th>
            </thead>
            <tbody>
              {% for grupo in grupos %}
              {% for usuario in grupo.estudiantes %}
                <tr style="border: 1px solid grey;">
                    <td>
                        <input name="p_group_number" type="text" value="{{forloop.parentloop.counter}}" />
                    </td>
                    <td>
                        <input type="text" value="{% for tarea in grupo.tarea %}{{tarea}} {% endfor %}"/>
                        <input name="p_task_name" type="hidden" value="{% for tarea in grupo.tarea %}||{{tarea}}||{% endfor %}"/>
                    </td>
                    <td>
                      <input name="p_username" type="text" min=0 max=10 value="{{usuario}}" />
                    </td>
                    <td>
                      <input name="p_calification" type="number" min=0 max=10 value="0" />
                    </td>
                </tr>
                  {% endfor %}
              {% endfor %}
            </tbody>          
        </table>                
    {% endif %}

  <style>
    .form-row-mod {
      display: flex;
      align-items: center;
    }

    #ver {
      padding: 8px;
      width: 100%;
      box-sizing: border-box;
    }
  
    .password-wrapper {
      flex-grow: 1;
    }
  
    button {
      margin-left: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: none;
      padding: 0;
    }

    .fila {
      justify-content: space-between;
      display: flex;
    }

    .item {
      padding: 10px;
    }
  </style>

  <div class="submit-row">
      {% if grupos %}
      <div class="fila">
        <input name="Save" type="submit" class="cms-btn-action" 
          data-url="{% url 'save' 1 %}" value="{% translate 'Guardar' %}">        
      </div>
      {% endif %}
      <div class="fila">
        <a  class="cms-btn-action" href="{% url 'actividades' 1 %}">{% translate 'Regresar' %}</a>
      </div>
  </div> 

</form>

{% endblock %}
